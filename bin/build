#!/bin/bash

build_image_pytorch2() {
    docker buildx build --tag pytorch2_rocm5_jammy:latest - < ./dockerfiles/pytorch2_rocm5_jammy.dockerfile
}

clean () {
    echo -n "Removing images: 'pytorch2_rocm5_jammy': "
    docker container prune
    docker image rm pytorch2_rocm5_jammy
    [ $? -eq 0 ] && echo "done." || "error." 
}

case "$1" in
clean) echo "Removing image"
    clean
    exit 1
    ;;
all|pytorch2) echo "Building all"
    build_image_pytorch2
	;;
*)	echo "Usage: $0 {help|clean|all|pytorch2}"
    exit 1
    ;;
esac
exit 0
